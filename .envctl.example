# .envctl.example
#
# envctl orchestration config (separate from your application `.env` files).
# Copy this to `.envctl` at the project root and override what you need.

# ==========================================
# Core
# ==========================================

# Global kill switch for default built-in infrastructure.
# When true, PostgreSQL + Redis startup is skipped.
ENVCTL_SKIP_DEFAULT_INFRASTRUCTURE=false

# ==========================================
# Database (PostgreSQL / Supabase)
# ==========================================

# Default mode: shared Main-mode PostgreSQL container.
POSTGRES_MAIN_ENABLE=true
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=postgres

# Supabase mode (opt-in). Supabase includes its own PostgreSQL stack.
# Use this when you want Supabase services instead of plain PostgreSQL.
SUPABASE_MAIN_ENABLE=false
SUPABASE_ALL_TREES=false

# ==========================================
# Redis
# ==========================================

# Global Redis toggle (applies to Main + Trees).
REDIS_ENABLE=true

# Main-mode Redis container (requires REDIS_ENABLE=true).
REDIS_MAIN_ENABLE=true

# Enable Redis for all Trees (requires REDIS_ENABLE=true).
REDIS_ALL_TREES=true

# Optional: comma-separated feature names to enable Redis for selected Trees.
# Example: REDIS_TREE_FILTER="checkout,crm-sync"
REDIS_TREE_FILTER=""

# Redis base port.
REDIS_PORT=6379

# ==========================================
# n8n
# ==========================================

# Global n8n toggle (applies to Main + Trees).
N8N_ENABLE=true

# Main-mode n8n service (requires N8N_ENABLE=true).
N8N_MAIN_ENABLE=false

# Enable n8n for all Trees (requires N8N_ENABLE=true).
N8N_ALL_TREES=false

# Optional: comma-separated feature names to enable n8n for selected Trees.
# Example: N8N_TREE_FILTER="checkout,crm-sync"
N8N_TREE_FILTER=""

# n8n base port.
N8N_PORT_BASE=5678

# ==========================================
# Backend Auto-Discovery
# ==========================================

# Used only when no explicit ENVCTL_SERVICE_<N> entries are defined.
BACKEND_DIR_NAME="backend"
RUN_BACKEND=true
BACKEND_PORT_BASE=8000

# ==========================================
# Frontend Auto-Discovery
# ==========================================

# Used only when no explicit ENVCTL_SERVICE_<N> entries are defined.
FRONTEND_DIR_NAME="frontend"
RUN_FRONTEND=true
FRONTEND_PORT_BASE=9000

# ==========================================
# Explicit Services
# ==========================================

# If any ENVCTL_SERVICE_<N> entry is defined, backend/frontend auto-discovery
# is disabled and only the declared services are started.
#
# Format:
#   "DisplayName | DirectoryPath | ServiceType | Port | BackendPort | LogDirectory"
#
# ServiceType: backend | frontend
#
# Backend services
# ENVCTL_SERVICE_1="API Server | backend  | backend  | 8000 |      | logs/api"
#
# Frontend services
# ENVCTL_SERVICE_2="Web App    | frontend | frontend | 3000 | 8000 | logs/web"
